# Kalman Filter 공부 

### 칼만 필터란? 

로봇의 측위를 추정 하는데 사용되는 방법 
칼만 필터는 과거와 현재의 값을 기준으로 재귀적 연산을 통하여 최적값을 추적한다. 
측정 데이터나 신호는 잡음을 동반하는데 여기서 원하는 신호나 정보를 골라내는 알고리즘이라고 보면된다. 

칼만 필터 알고리즘을 사용하기 위해서는 다음의 2가지가 갖춰져야 한다. 
1. 모션 모델과 측정 모델이 선형적인 경우
2. 모션 모델과 측정 모델이 가우시안 분포를 따를 경우 

칼만 필터는 물체의 측정값에 확률적인 오차가 포함되고, 물체의 특정 시점에서의 상태가 이전 시점의 상태와 선형적인 관계를 가지고 있는 경우 적용이 가능하다. 
예를 들어 레이더 추적의 경우 특정 물체의 위치, 속도, 가속도 등을 측정하고 측정된 역속적 값들로 부터 칼만 필터를 이용하여 해당 물체의 위치를 추정 할 수 있다. 

칼만 필터는 위치와 속도 두 변수를 랜덤 가우시안 분포로 가정한다. 

동작원리는 다음과 같다. 
다음 위치를 확률적으로 예측하고, 실제로 측정한 값을 통해 예측값과 얼마나 비슷한지 확인 후 보정과 추정을 한다. 
그리고 보정된 값으로 다시 다음 위치를 예측하고, 다시 새롭게 측정받은 값으로 다시 추정을 한다. 

직전의 값을 다시 활용하기에 메모리 부담이 없다. 
다만 어느정도 데이터가 쌓일 때까지 시간이 필요하고, 초기에 상대적으로 불안하다는 특성이 있다. 



## 식으로 표현하면 다음과 같다. 

실제 우리가 계측한 데이터는 실제 데이터에 관측 행렬을 곱한것과 같다. 

![image](https://user-images.githubusercontent.com/63197363/181880011-e9f3d218-be09-4056-a70d-9cbe7c120d8e.png)

여기서 Vk는 노이즈를 의미한다. 

여기서 칼만 추정식 관측 모델의 식을 대입하면 다음과 같다.

![image](https://user-images.githubusercontent.com/63197363/181880175-bcd56862-5d67-4b64-a844-d08349bc5cf7.png)

앞의 Xk는 사후 추정값이고, 뒤의 Xk는 사정 추정값이다. Zk는 실제 값이다. 

추정치와 오차의 공분산 행렬은 다음과 같다. 

![image](https://user-images.githubusercontent.com/63197363/181880237-e7799826-b374-4d67-b2e5-b5befe505d28.png)

이를 정리한 후 미분을 통하여 칼만 게인 Kk 를 얻으면 담으과 같은 식이 나오게 된다. 

![image](https://user-images.githubusercontent.com/63197363/181880266-3bef5950-a3c7-4316-ba1c-62d1dd593354.png)


